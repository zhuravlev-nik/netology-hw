# Домашнее задание к занятию "`Базы данных, их типы`" - `Журавлев Николай`

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительное время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

### Решение 1

1.1 Для бюджетирования проектов и создания финансовых отчетов подойдет реляционная БД (PostgreSQL, MySQL и т.п.). 
  * поддерживают четкую структуру данных
  * возможность создания сложных запросов и агрегаций
  
1.1.* Для ускорения хэширования можно использовать библиотеку OpenSSL 

1.2. Для хранения данных с лендингов и CRM лучше всего подойдут NoSQL СУБД, такие как MongoDB. Они обеспечивают высокую скорость записи и гибкость в работе с неструктурированными данными.
  * Можно легко добавлять новые поля и менять структуру.
  * Высокая производительность при записи и чтении больших объёмов данных.

1.2.* MongoDB может закрыть обе задачи, так как она поддерживает работу с документами (JSON-формат), легко масштабируется и быстро работает с большими объёмами данных.

1.3. Для этой задачи лучше подойдёт реляционная СУБД (например, MySQL или PostgreSQL), поскольку она обеспечивает строгую структуру данных, а простота работы с таблицами и запросами делает её удобной для хранения корпоративных стандартов и материалов.

1.3.* Если использовать PostgreSQL для бюджетирования (как в задаче 1.1), то её же можно использовать и для этой задачи, создав отдельные схемы и таблицы для контроля качества.

1.4. Для задач логистики и маршрутизации можно использовать графовые СУБД. Графовые базы данных подходят для работы со связями (маршруты доставки).
  * Быстро работают с узлами и связями.
  * Возможно построить сложных маршрутов и сетей
  
1.4.* Отдел закупок можно подключить к той же графовой СУБД, так как закупки могут использовать похожие модели связей (например, цепочки поставок).

1.5.* Можно использовать и одну базу данных для всех задач, например PostgreSQL. Postgres поддерживает расширения для работы с графами (pgRouting), документами JSON и сложными аналитическими запросами. Но такой подход может привести к сложностям в управлении и масштабировании.


---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

### Решение 2

2.1. Пополнение баланса счета телефона можно разделить на следующие шаги:
  * Пользователь вводит данные (номер телефона, сумму пополнения, и способ оплаты).
  * Система проверяет корректность введённых данных (номер телефона, доступность суммы на счёте пользователя и правильность реквизитов).
  * Система блокирует необходимую сумму на счёте пользователя или его банковской карте, проверяя доступность средств для оплаты.
  * Система направляет запрос на выполнение транзакции в платёжный шлюз или платёжную систему, которая обрабатывает перевод средств.
  * После успешной обработки платёжной системой приходит подтверждение о переводе средств. На этом этапе средства списываются с пользователя.
  * Платёжная система уведомляет оператора связи, и средства зачисляются на телефонный счёт пользователя. Система уведомляет пользователя о завершении транзакции, например, через SMS.

2.1.* При автоплатеже происходите следующее:
  * Пользователь изначально настраивает автоплатёж, указывая сумму, частоту или условие (например, при снижении баланса ниже определённого уровня), способо оплаты.
  * Система самостоятельно инициирует платёж на основе настроенных пользователем условий, без прямого участия пользователя.
  * Система проверяет, выполнены ли условия для автоплатежа (например, баланс ниже установленного уровня или наступила дата автоплатежа).
  * Система проверяет доступность средств на указанном счёте и блокирует нужную сумму для автоплатежа.
  * Система отправляет запрос на выполнение транзакции в платёжный шлюз, который обрабатывает платёж.
  * Средства зачисляются на телефонный счёт, и пользователь получает уведомление о пополнении.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

### Решение 3

3.1 Преимущества SQL-систем по отношению к NoSQL.
  * Строгая структура и целостность данных: реляционные СУБД обеспечивают строгую схему данных и поддерживают ACID-свойства (атомарность, согласованность, изолированность, надёжность), что важно для финансовых приложений, банковских систем и любых задач, где критична целостность данных.
  * Язык запросов SQL предоставляет мощные инструменты для работы с данными, включая сложные выборки, агрегации, объединения, подзапросы и функции. Это делает SQL удобным для аналитики и работы с большими объёмами данных.
  * Поддержка транзакций для обеспечения выполнения операций в многопользовательских средах, что критично для систем с высокой нагрузкой.
  * SQL-системы имеют долгую историю, обширную документацию, мощные инструменты и поддержку вендоров. Это упрощает разработку, обучение и интеграцию с другими системами.
  * В SQL-системах данные можно организовать в виде связанных таблиц, что позволяет избегать избыточности и дублирования данных, упрощая их управление и обновление.

3.1* Преимущества NewSQL перед SQL и NoSQL
  NewSQL объединяют в себе плюсы SQL и NoSQL решений
  * Масштабируемость на уровне NoSQL
  * Соблюдение ACID-свойств как в SQL-решениях
  * Высокая производительность, может превосходить SQL-решения

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*

### Решение 4

При выборе СУБД для подобной задачи в первую очередь стоит обратить внимание на масштабируемость (репликация и шардирование).
Вопрос по *модели распределенных вычислений* не совсем понятен, честно говоря. Шардирование и репликация самой базы данных + соответственно получим распределение нагрузки на необходимое нам количество машин, архитекрура, естественно - клиент-серверная.

---